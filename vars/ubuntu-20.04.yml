---

# Copyright 2023 Wong Hoi Sing Edison <hswong3i@pantarei-design.com>
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

_kube_release: "1.26"

_apt_key:
  - keyring: "/etc/apt/trusted.gpg.d/crio-upstream.gpg"
    url: https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable:cri-o:/1.24/xUbuntu_20.04/Release.key
    id: 2472D6D0D2F66AF87ABA8DA34D64390375060AA4
    state: "present"

_apt_repository:
  - filename: "upstream-crio1.24"
    repo: "deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/1.24/xUbuntu_20.04/ /"
    state: "present"
  - filename: "upstream-crio1.25"
    repo: "deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/1.25/xUbuntu_20.04/ /"
    state: "present"
  - filename: "upstream-crio1.26"
    repo: "deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/1.26:/xUbuntu_20.04/ /"
    state: "present"

_apt:
  - { state: "latest", name: "conntrack" }
  - { state: "latest", name: "iproute2" }
  - { state: "latest", name: "iptables" }
  - { state: "latest", name: "socat" }
  - { state: "present", name: "cri-o={{ cri_o_version }}.*" }

_cri_o_crio_runtime_default_runtime: "crun"

_cri_o_crio_runtime_conmon_cgroup: "system.slice"

_cri_o_crio_runtime_cgroup_manager: "systemd"
